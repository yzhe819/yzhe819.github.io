---
title: "Mit 6.S081 Lab 0 æ­å»ºç¯å¢ƒ"
date: 2022-06-07
draft: false
tags: ["ä¸­æ–‡","æ“ä½œç³»ç»Ÿ","6.S081"]
slug: "mit-6.S081.lab-0"
---

> æœ¬ç¯‡æ–‡ç« ä¸»è¦è®°å½•MIT 6.S081å®éªŒç¯å¢ƒçš„æ­å»ºã€‚

<!--more-->

## ç¯å¢ƒæ­å»º

### å®˜æ–¹æ­å»ºæŒ‡å¯¼

[å®˜æ–¹çš„æ­å»ºæ­¥éª¤](https://pdos.csail.mit.edu/6.828/2020/tools.html)

![å®˜æ–¹çš„æ­å»ºæ­¥éª¤](/tools.png)



### æœ¬åœ°æ­å»ºè®°å½•

æœ¬åœ°ç¯å¢ƒä¸ºWindows 10 + WSL2 (Ubuntu 20.04.4 LTS)ï¼Œå®‰è£…æ­¥éª¤ä¸ºï¼š

é¦–å…ˆè¿›å…¥WSL2ï¼š

```bash
bash
```



ç„¶åæ£€æŸ¥ ubuntu ç‰ˆæœ¬ï¼Œç¡®ä¿ ubuntu æ˜¯åœ¨20æˆ–è€…ä»¥ä¸Šã€‚

```bash
lsb_release -a
```

**ç‰¹åˆ«æ³¨æ„**ï¼šè¿™é‡Œæ£€æŸ¥ç‰ˆæœ¬æ˜¯å› ä¸ºåªæœ‰ ubuntu 20.04 ä¸‹é¢æ‰æœ‰å¯¹åº”çš„æŸä¸ªpackageçš„é•œåƒæºï¼Œå¦‚æœæ˜¯ç‰ˆæœ¬18æ˜¯æ— æ³•æŸ¥æ‰¾åˆ°çš„ã€‚**å¦‚æœæœ‰éœ€è¦è¯·è‡ªè¡Œæ›´æ–°WSL**



ç„¶åæ ¹æ®å®˜æ–¹æ•™ç¨‹ï¼ŒæŠŠä¸€ç³»åˆ—ä¾èµ–è£…ä¸Šï¼š

```bash
sudo apt-get install git build-essential gdb-multiarch qemu-system-misc gcc-riscv64-linux-gnu binutils-riscv64-linux-gnu
```



æ¥ä¸‹æ¥å°±æ˜¯qemu-system-misc ä¿®å¤ï¼Œqemu-system-misc åŒ…æ”¶åˆ°äº†ä¸€ä¸ªæ›´æ–°ï¼Œè¯¥æ›´æ–°ç ´åäº†å®ƒä¸å†…æ ¸çš„å…¼å®¹æ€§ï¼Œ æ‰€ä»¥éœ€è¦ä¸€ä¸ªè€ç‰ˆæœ¬ã€‚

å…ˆå¸è½½æ–°ç‰ˆæœ¬ï¼š

```bash
sudo apt-get remove qemu-system-misc
```

ç„¶åå®‰è£…è€çš„å…¼å®¹ç‰ˆæœ¬ï¼š

```bash
sudo apt-get install qemu-system-misc=1:4.2-3ubuntu6
```

**ç‰¹åˆ«æ³¨æ„**ï¼šè¿™ä¸ª**qemu-system-misc=1:4.2-3ubuntu6**å°±æ˜¯å‰æ–‡æåˆ° **ubuntu 18** æ‰€æ‰¾ä¸åˆ°çš„åŒ…



è¿™é‡Œéœ€è¦è¡¥ä¸€ä¸ªåŒ…ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¼šå¾—åˆ°not foundä¿¡æ¯ï¼š

```bash
riscv64-unknown-elf-gcc --version
```

å¯ä»¥ç›´æ¥è£…ã€‚

```bash
sudo apt install gcc-riscv64-unknown-elf-gcc
```

å†æ¬¡æµ‹è¯•ï¼Œç°åœ¨åº”è¯¥å¯ä»¥æ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬ï¼š

```bash
riscv64-unknown-elf-gcc --version
riscv64-unknown-elf-gcc (GCC) 10.1.0
```



æ£€æŸ¥ç¯å¢ƒæ˜¯å¦æ­å»ºå®Œæˆã€‚

è¿è¡Œè¿™ä¸¤ä¸ªç‰ˆæœ¬æ£€æŸ¥ï¼Œè¾“å‡ºç‰ˆæœ¬ä¿¡æ¯ä¸€æ ·å°±å®Œæˆäº†ã€‚

```
$ qemu-system-riscv64 --version
QEMU emulator version 5.1.0

$ riscv64-unknown-elf-gcc --version
riscv64-unknown-elf-gcc (GCC) 10.1.0
```



## ç‰ˆæœ¬æ§åˆ¶

æˆ‘ä»¬éœ€è¦å°†è¯¾ç¨‹ä»£ç ä¸‹è½½åˆ°æœ¬åœ°ä»¥åŠä½¿ç”¨githubæ¥è¿›è¡Œå¼€å‘ç®¡ç†:



é¦–å…ˆåœ¨Githubä¸Šæ–°å¼€ä¸€ä¸ªç©ºä»“åº“ã€‚



ç„¶åå°†mitçš„å®éªŒä»£ç å…‹éš†åˆ°æœ¬åœ°ï¼š

```bash
git clone git://g.csail.mit.edu/xv6-labs-2020
```



è¿›å…¥å¯¹äºæ–‡ä»¶å¤¹ä»¥åŠåˆ‡æ¢åˆ†æ”¯ï¼š

```bash
cd xv6-labs-2020
git checkout util
```

**æ³¨**ï¼šMIT 6.S081 è¿™é—¨è¯¾ç¨‹æ¯ä¸ªlabå¯¹åº”ä¸€ä¸ªgitåˆ†æ”¯ï¼Œutilåˆ†æ”¯æ˜¯ç¬¬ä¸€ä¸ªlabçš„åˆ†æ”¯ï¼Œè¿™é‡Œç”¨è¿™ä¸ªåˆ†æ”¯æµ‹è¯•ä¹‹å‰æ­å»º



æ‰§è¡Œå‘½ä»¤ï¼š

```bash
sudo make qemu
```

çœ‹åˆ°ä¸‹åˆ—è¾“å‡ºè¯æ˜æˆ‘ä»¬çš„é…ç½®ç”Ÿæ•ˆäº†ï¼š

```
xv6 kernel is booting

hart 2 starting
hart 1 starting
init: starting sh
```

åœ¨è¿™ç§æƒ…å†µä¸‹è¾“å…¥lsä¼šå¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```
$ ls
.              1 1 1024
..             1 1 1024
README         2 2 2104
xargstest.sh   2 3 99
cat            2 4 23864
echo           2 5 22688
forktest       2 6 13000
grep           2 7 27208
init           2 8 23776
kill           2 9 22664
ln             2 10 22608
ls             2 11 26104
mkdir          2 12 22760
rm             2 13 22744
sh             2 14 41736
stressfs       2 15 23760
usertests      2 16 147440
grind          2 17 37872
wc             2 18 24968
zombie         2 19 22136
console        3 20 0
```

**æ³¨**ï¼šåé¢˜äº†ï¼Œå›å½’ç‰ˆæœ¬ç®¡ç†



æ·»åŠ gitä»“åº“çš„åœ°å€ï¼Œè¿™ä¸ªä»“åº“åœ°å€æ˜¯ç¬¬ä¸€æ­¥æ–°å»ºçš„ä»“åº“åœ°å€

~~å°±æ˜¯å¹³æ—¶ä½¿ç”¨git cloneåçš„é“¾æ¥~~

```
git remote add github ä½ çš„ä»“åº“åœ°å€
```

**ç‰¹åˆ«æ³¨æ„**ï¼šè¯·å‹¿éšæ„ä¿®æ”¹.gitç›®å½•å’ŒåŸoriginæŒ‡å‘çš„é“¾æ¥



æ¥ç€æˆ‘ä»¬å¯ä»¥æŠŠlab1çš„å®éªŒä»£ç æ¨é€åˆ°githubï¼š

```bash
git push github util:util
```

**æ³¨**ï¼šå‘½ä»¤ä¸­çš„githubæ˜¯è¿œç¨‹ä¸»æœºåï¼Œè¡¨ç¤ºä¼šæ¨åˆ°ä¸Šä¸€æ­¥æ¨åˆ°çš„é“¾æ¥ä¸Š



**æ³¨**ï¼šç‰ˆæœ¬æ§åˆ¶çš„éƒ¨åˆ†[6.S081-All-In-One-Gitbook](http://xv6.dgs.zone/)æä¾›äº†å›¾æ–‡æ•™ç¨‹ï¼Œå¯ä»¥è¿›è¡Œå‚è€ƒ



å¥½äº†åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»é…ç½®åˆ°åŸºç¡€çš„ç¯å¢ƒå’Œåšå¥½äº†ç‰ˆæœ¬ç®¡ç†

æ¥ä¸‹æ¥å°±èƒ½å¼€å§‹åšlabå®éªŒäº†ğŸ‰

Happy coding ğŸ’–